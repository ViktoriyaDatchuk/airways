"use strict";(self.webpackChunkairways=self.webpackChunkairways||[]).push([[299],{299:(O,Z,i)=>{i.r(Z),i.d(Z,{MainModule:()=>R});var e=i(1965),p=i(8252),d=i(4006),T=i(8675),P=i(4004),m=i(9363),x=i(7313),t=i(4650),b=i(372),_=i(7392),M=i(1481),l=i(1831),u=i(5657),o=i(6895),c=i(4859),v=i(3546),g=i(9549),s=i(4144),I=i(1948),D=i(3805),k=i(3238),f=i(9602),F=i(325);function U(a,h){if(1&a&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&a){const n=h.$implicit;t.Q6J("value",n.key),t.xp6(1),t.hij(" ",n.city," ")}}function S(a,h){1&a&&(t.TgZ(0,"div",25),t._uU(1," From Input Required "),t.qZA())}function J(a,h){if(1&a&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&a){const n=h.$implicit;t.Q6J("value",n.key),t.xp6(1),t.hij(" ",n.city," ")}}function N(a,h){1&a&&(t.TgZ(0,"div",25),t._uU(1," Destination Input Required "),t.qZA())}function Q(a,h){if(1&a&&(t.TgZ(0,"mat-form-field",26)(1,"mat-label"),t._uU(2,"Dates"),t.qZA(),t.TgZ(3,"mat-date-range-input",27),t._UZ(4,"input",28)(5,"input",29),t.qZA(),t._UZ(6,"mat-datepicker-toggle",30),t.TgZ(7,"mat-date-range-picker",null,31)(9,"mat-datepicker-actions")(10,"button",32),t._uU(11,"Cancel"),t.qZA(),t.TgZ(12,"button",33),t._uU(13,"Apply"),t.qZA()()()()),2&a){const n=t.MAs(8),r=t.oxw();t.xp6(3),t.Q6J("rangePicker",n),t.xp6(1),t.Q6J("formControl",r.startDateControl),t.xp6(1),t.Q6J("formControl",r.endDateControl),t.xp6(1),t.Q6J("for",n)}}function w(a,h){1&a&&(t.TgZ(0,"div",25),t._uU(1," Dates Input Required "),t.qZA())}function L(a,h){1&a&&(t.TgZ(0,"div",25),t._uU(1," Date Input Required "),t.qZA())}function Y(a,h){if(1&a&&(t.TgZ(0,"mat-form-field",16)(1,"mat-label"),t._uU(2,"Date"),t.qZA(),t._UZ(3,"input",34)(4,"mat-datepicker-toggle",30),t.TgZ(5,"mat-datepicker",null,35)(7,"mat-datepicker-actions")(8,"button",32),t._uU(9,"Cancel"),t.qZA(),t.TgZ(10,"button",33),t._uU(11,"Apply"),t.qZA()()()(),t.YNc(12,L,2,0,"div",12)),2&a){const n=t.MAs(6),r=t.oxw();t.xp6(3),t.Q6J("matDatepicker",n)("formControl",r.startDateControl),t.xp6(1),t.Q6J("for",n),t.xp6(8),t.Q6J("ngIf",r.startDateControl.invalid&&r.startDateControl.touched)}}let V=(()=>{class a{constructor(n,r,C,y,A,q,$){this.airportService=n,this.matIconRegistry=r,this.domSanitizer=C,this.router=y,this.store=A,this.authStore=q,this.cookieService=$,this.tripTypes=["round-trip","one-way"],this.return=!0,this.fromControl=new d.NI("",d.kI.required),this.destControl=new d.NI("",d.kI.required),this.startDateControl=new d.NI("",d.kI.required),this.endDateControl=new d.NI("",this.return?d.kI.required:null),this.airports=[],this.isValid=!0,this.passengerIsValid=!1,this.matIconRegistry.addSvgIcon("switch",this.domSanitizer.bypassSecurityTrustResourceUrl("./assets/switch.svg"))}ngOnInit(){this.getAirports(),this.filteredFrom=this.fromControl.valueChanges.pipe((0,T.O)(""),(0,P.U)(n=>this._filter(n||""))),this.filteredDest=this.destControl.valueChanges.pipe((0,T.O)(""),(0,P.U)(n=>this._filter(n||""))),this.cookieService.get("auth")&&this.airportService.authMe(this.cookieService.get("auth")).subscribe(n=>{this.authStore.dispatch((0,x.tR)(!0)),this.authStore.dispatch((0,x.cg)({birthday:n.dateOfBirth,citizenship:n.citizenship,countryCode:n.countryCode,email:n.email,lastName:n.lastName,name:n.firstName,phone:n.phone,sex:n.gender}))})}_filter(n){const r=n.toLowerCase();return this.airports.filter(C=>C.city.toLowerCase().includes(r))}getAirports(){this.airportService.all().subscribe(n=>{this.airports=n})}changeInputFields(){const r=this.fromControl.value;this.fromControl.setValue(this.destControl.value),this.destControl.setValue(r)}changeTrip(n){n.value===this.tripTypes[0]?(this.return=!0,this.store.dispatch((0,m.wW)(!0))):n.value===this.tripTypes[1]&&(this.return=!1,this.store.dispatch((0,m.wW)(!1)))}passengerValid(n){this.passengerIsValid=n}validateForm(){let n;n=this.return?this.destControl.invalid||this.fromControl.invalid||this.endDateControl.invalid||this.startDateControl.invalid:this.destControl.invalid||this.fromControl.invalid||this.startDateControl.invalid,this.isValid=!n&&this.passengerIsValid}searchItems(){this.validateForm(),this.isValid&&(this.store.dispatch((0,m.ab)(this.fromControl.value||"AMS")),this.store.dispatch((0,m._4)(this.destControl.value||"MAD")),this.store.dispatch((0,m.WQ)(new Date(this.startDateControl.value||"2023-09-21T00:00:00.000Z").toISOString())),this.return&&this.store.dispatch((0,m.Jf)(new Date(this.endDateControl.value||"2023-10-11T00:00:00.000Z").toISOString())),this.router.navigate(["/booking"]))}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(b.G),t.Y36(_.jv),t.Y36(M.H7),t.Y36(p.F0),t.Y36(l.yh),t.Y36(l.yh),t.Y36(u.N))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-main"]],decls:43,vars:15,consts:[[1,"container"],[1,"background"],[1,"inner-container"],[1,"card"],["action","",1,"form"],["value","round-trip","checked","","color","primary",3,"change"],["value","one-way","color","primary",3,"change"],[1,"destination"],["type","text","placeholder","From","aria-label","Number","matInput","",3,"formControl","matAutocomplete"],["autoActiveFirstOption",""],["autoFrom","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","danger-text",4,"ngIf"],["type","text","placeholder","Choose your destination","aria-label","Number2","matInput","",3,"formControl","matAutocomplete"],["autoDestination","matAutocomplete"],[1,"inline"],[1,"dates"],["appearance","fill",4,"ngIf","ngIfElse"],["soloDatePicker",""],[3,"validStatus"],[1,"search"],["mat-button","","color","primary",3,"click"],["mat-icon-button","",1,"switch",3,"click"],["svgIcon","switch"],[3,"value"],[1,"danger-text"],["appearance","fill"],[3,"rangePicker"],["matStartDate","","placeholder","Start date",3,"formControl"],["matEndDate","","placeholder","End date",3,"formControl"],["matIconSuffix","",3,"for"],["picker",""],["mat-button","","matDatepickerCancel",""],["mat-raised-button","","matDatepickerApply",""],["matInput","",3,"matDatepicker","formControl"],["datepicker",""]],template:function(n,r){if(1&n&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.TgZ(2,"div",2)(3,"mat-card",3)(4,"form",4)(5,"div")(6,"mat-radio-group")(7,"mat-radio-button",5),t.NdJ("change",function(y){return r.changeTrip(y)}),t._uU(8,"Round Trip"),t.qZA(),t.TgZ(9,"mat-radio-button",6),t.NdJ("change",function(y){return r.changeTrip(y)}),t._uU(10,"One way"),t.qZA()()(),t.TgZ(11,"div")(12,"mat-form-field",7)(13,"mat-label"),t._uU(14,"From"),t.qZA(),t._UZ(15,"input",8),t.TgZ(16,"mat-autocomplete",9,10),t.YNc(18,U,2,2,"mat-option",11),t.ALo(19,"async"),t.qZA()(),t.YNc(20,S,2,0,"div",12),t.qZA(),t.TgZ(21,"div")(22,"mat-form-field",7)(23,"mat-label"),t._uU(24,"Destination"),t.qZA(),t._UZ(25,"input",13),t.TgZ(26,"mat-autocomplete",9,14),t.YNc(28,J,2,2,"mat-option",11),t.ALo(29,"async"),t.qZA()(),t.YNc(30,N,2,0,"div",12),t.qZA(),t.TgZ(31,"div",15)(32,"div",16),t.YNc(33,Q,14,4,"mat-form-field",17),t.YNc(34,w,2,0,"div",12),t.qZA(),t.YNc(35,Y,13,4,"ng-template",null,18,t.W1O),t.TgZ(37,"app-passenger-list",19),t.NdJ("validStatus",function(y){return r.passengerValid(y)}),t.qZA()(),t.TgZ(38,"div",20)(39,"button",21),t.NdJ("click",function(){return r.searchItems()}),t._uU(40,"Search"),t.qZA()(),t.TgZ(41,"button",22),t.NdJ("click",function(){return r.changeInputFields()}),t._UZ(42,"mat-icon",23),t.qZA()()()()()),2&n){const C=t.MAs(17),y=t.MAs(27),A=t.MAs(36);t.xp6(15),t.Q6J("formControl",r.fromControl)("matAutocomplete",C),t.xp6(3),t.Q6J("ngForOf",t.lcZ(19,11,r.filteredFrom)),t.xp6(2),t.Q6J("ngIf",r.fromControl.invalid&&r.fromControl.touched),t.xp6(5),t.Q6J("formControl",r.destControl)("matAutocomplete",y),t.xp6(3),t.Q6J("ngForOf",t.lcZ(29,13,r.filteredDest)),t.xp6(2),t.Q6J("ngIf",r.destControl.invalid&&r.destControl.touched),t.xp6(3),t.Q6J("ngIf",r.return)("ngIfElse",A),t.xp6(1),t.Q6J("ngIf",r.return&&r.startDateControl.invalid&&r.endDateControl.invalid&&(r.endDateControl.touched||r.startDateControl.touched))}},dependencies:[o.sg,o.O5,c.lW,c.RK,_.Hw,v.a8,g.KE,g.hX,g.R9,s.Nt,I.VQ,I.U0,D.XC,k.ey,D.ZL,f.Mq,f.hl,f.nW,f.wx,f.zY,f.By,f._g,f.M5,f.dp,f.DK,d._Y,d.Fj,d.JJ,d.JL,d.F,d.oH,F.G,o.Ov],styles:[".card[_ngcontent-%COMP%]{margin-top:150px;margin-bottom:160px;width:580px;background-color:#ffffffd9}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;position:relative}.background[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background-image:url(Background.a689a0143524e8be.jpg);background-repeat:no-repeat;background-position:center top}.inner-container[_ngcontent-%COMP%]{max-width:1440px}.form[_ngcontent-%COMP%]{margin:24px;position:relative}.destination[_ngcontent-%COMP%]{width:532px}.switch[_ngcontent-%COMP%]{position:absolute;right:20px;top:80px;background-color:#fff;border:.5px solid grey}.inline[_ngcontent-%COMP%]{display:flex}.dates[_ngcontent-%COMP%]{width:50%}.danger-text[_ngcontent-%COMP%]{color:red}.search[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),a})(),R=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[e.m,p.Bz.forChild([{path:"",component:V}])]}),a})()},6032:(O,Z,i)=>{i.d(Z,{Jb:()=>m,On:()=>l,aU:()=>v,bh:()=>b,f5:()=>t,fX:()=>d,i2:()=>_,iv:()=>p,mJ:()=>u,mP:()=>x,nA:()=>P,qE:()=>c,sA:()=>M,wr:()=>T,xh:()=>o});var e=i(1831);const p=s=>s.booking,d=(0,e.P1)(p,s=>s.from),T=(0,e.P1)(p,s=>s.destination),P=(0,e.P1)(p,s=>s.dateFrom),m=(0,e.P1)(p,s=>s.dateTo),x=(0,e.P1)(p,s=>s.adults),t=(0,e.P1)(p,s=>s.childs),b=(0,e.P1)(p,s=>s.infants),_=(0,e.P1)(p,s=>s.isRoundTrip),M=(0,e.P1)(p,s=>s.travelFrom),l=(0,e.P1)(p,s=>s.travelTo),u=(0,e.P1)(p,s=>s.ticketFrom),o=(0,e.P1)(p,s=>s.ticketTo),c=(0,e.P1)(p,s=>s.isLoadingFlight),v=(0,e.P1)(p,s=>s.personsData);(0,e.P1)(p,s=>s.personsContacts)},325:(O,Z,i)=>{i.d(Z,{G:()=>M});var e=i(4650),p=i(6032),d=i(1831),T=i(6895);let P=(()=>{class l{constructor(){this.counter=0}increase(){this.counter++}decrease(){this.counter--}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac}),l})();var m=i(9363);let x=(()=>{class l{constructor(o,c){this.counter=o,this.state=c,this.typesPassengers=["Adults","Child","Infant"]}getCounter(){return this.counter.counter}setChanges(){this.passenger.title===this.typesPassengers[0]?this.state.dispatch((0,m.rj)(this.getCounter())):this.passenger.title===this.typesPassengers[1]?this.state.dispatch((0,m.MW)(this.getCounter())):this.passenger.title===this.typesPassengers[2]&&this.state.dispatch((0,m.sk)(this.getCounter()))}increase(o){o.stopPropagation(),this.counter.increase(),this.setChanges()}decrease(o){o.stopPropagation(),this.counter.decrease(),this.setChanges()}disabled(){return!(this.getCounter()>0)}}return l.\u0275fac=function(o){return new(o||l)(e.Y36(P),e.Y36(d.yh))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-passenger-type"]],inputs:{passenger:"passenger"},features:[e._Bn([P])],decls:12,vars:4,consts:[[1,"item"],[1,"data"],[1,"counter"],["type","button",3,"disabled","click"],["type","button",3,"click"]],template:function(o,c){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA()(),e.TgZ(6,"div",2)(7,"button",3),e.NdJ("click",function(g){return c.decrease(g)}),e._uU(8,"-"),e.qZA(),e._uU(9),e.TgZ(10,"button",4),e.NdJ("click",function(g){return c.increase(g)}),e._uU(11,"+"),e.qZA()()()),2&o&&(e.xp6(3),e.Oqu(c.passenger.title),e.xp6(2),e.Oqu(c.passenger.age),e.xp6(2),e.Q6J("disabled",c.disabled()),e.xp6(2),e.hij(" ",c.getCounter()," "))},styles:[".item[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:0;width:201px;height:56px}.data[_ngcontent-%COMP%]{width:81px;height:40px}h3[_ngcontent-%COMP%]{font-family:Roboto;font-style:normal;font-weight:400;font-size:16px;line-height:24px;display:flex;align-items:center;letter-spacing:.5px;color:#11397e;margin:0}p[_ngcontent-%COMP%]{font-family:Roboto;font-style:normal;font-weight:400;font-size:14px;line-height:20px;letter-spacing:.25px;color:#74767a}button[_ngcontent-%COMP%]{width:24px;height:24px;border:none;cursor:pointer}.counter[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:flex-start;padding:0;width:72px;height:24px}"]}),l})();const t=["buttonList"];function b(l,u){1&l&&e._UZ(0,"app-passenger-type",6),2&l&&e.Q6J("passenger",u.$implicit)}function _(l,u){1&l&&(e.TgZ(0,"div",7),e._uU(1,"Passengers must be more then 0"),e.qZA())}let M=(()=>{class l{constructor(o){this.state=o,this.passengerList=[{title:"Adults",age:"14+ years"},{title:"Child",age:"2-14 years"},{title:"Infant",age:"0-2 years"}],this.isOpen=!1,this.isTouched=!1,this.text="adult 0, child 0, infant 0",this.isValid=!1,this.validStatus=new e.vpe,this.Adults$=this.state.select(p.mP),this.Childs$=this.state.select(p.f5),this.Infants$=this.state.select(p.bh),this.Adults$.subscribe(c=>{this.Adults=c,this.select()}),this.Childs$.subscribe(c=>{this.Childs=c,this.select()}),this.Infants$.subscribe(c=>{this.Infants=c,this.select()})}select(){this.Adults$=this.state.select(p.mP),this.Childs$=this.state.select(p.f5),this.Infants$=this.state.select(p.bh),this.getPasString(),this.setIsValid()}ngOnInit(){}getPasString(){this.text=`${this.Adults} Adult, ${this.Childs} Child, ${this.Infants} Infant`}openList(o){this.isOpen=!this.isOpen,this.isTouched&&this.setIsValid(),this.isTouched=!0}setIsValid(){this.isValid=!(0===this.Adults+this.Childs+this.Infants&&this.isTouched),this.emitValidStatus()}emitValidStatus(){this.validStatus.emit(this.isValid)}}return l.\u0275fac=function(o){return new(o||l)(e.Y36(d.yh))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-passenger-list"]],viewQuery:function(o,c){if(1&o&&e.Gf(t,5),2&o){let v;e.iGM(v=e.CRH())&&(c.buttonList=v.first)}},outputs:{validStatus:"validStatus"},decls:7,vars:5,consts:[[1,"relative",3,"click"],["buttonList",""],["mat-button","",1,"relative__button"],[1,"list"],[3,"passenger",4,"ngFor","ngForOf"],["class","relative__error danger-text",4,"ngIf"],[3,"passenger"],[1,"relative__error","danger-text"]],template:function(o,c){1&o&&(e.TgZ(0,"div",0,1),e.NdJ("click",function(g){return c.openList(g)}),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,b,1,1,"app-passenger-type",4),e.qZA(),e.YNc(6,_,2,0,"div",5),e.qZA()),2&o&&(e.Tol(c.isOpen?"active":""),e.xp6(3),e.Oqu(c.text),e.xp6(2),e.Q6J("ngForOf",c.passengerList),e.xp6(1),e.Q6J("ngIf",!c.isValid))},dependencies:[T.sg,T.O5,x],styles:["[_nghost-%COMP%]{width:100%;margin-left:15px}.relative[_ngcontent-%COMP%]{position:relative;padding-top:17px;padding-bottom:8px;border-radius:10px;cursor:pointer}.relative[_ngcontent-%COMP%]:hover{background-color:#eee}.relative__button[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid rgb(119,119,119);border-radius:0;margin-top:19px;text-align:center}.relative__button[_ngcontent-%COMP%]:hover{border-bottom:1px solid black}.relative__error[_ngcontent-%COMP%]{margin-top:20px}.relative.active[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{display:block}.relative.invalid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:0}.relative.invalid[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{top:55px}.list[_ngcontent-%COMP%]{display:none;position:absolute;left:0;top:60px;z-index:5;width:201px;height:184px;background:#ffffff;box-shadow:0 1px 4px #0003}.danger-text[_ngcontent-%COMP%]{color:red}"]}),l})()}}]);