"use strict";(self.webpackChunkairways=self.webpackChunkairways||[]).push([[299],{299:(b,A,o)=>{o.r(A),o.d(A,{MainModule:()=>$});var e=o(1965),l=o(8252),u=o(4006),C=o(8675),y=o(4004),d=o(9363),t=o(4650),h=o(372),f=o(7392),M=o(1481),x=o(1831),c=o(6895),g=o(4859),a=o(3546),p=o(9549),T=o(4144),P=o(1948),i=o(3805),I=o(3238),v=o(9602),D=o(325);function F(s,m){if(1&s&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&s){const n=m.$implicit;t.Q6J("value",n.key),t.xp6(1),t.hij(" ",n.city," ")}}function S(s,m){1&s&&(t.TgZ(0,"div",25),t._uU(1," From Input Required "),t.qZA())}function U(s,m){if(1&s&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&s){const n=m.$implicit;t.Q6J("value",n.key),t.xp6(1),t.hij(" ",n.city," ")}}function k(s,m){1&s&&(t.TgZ(0,"div",25),t._uU(1," Destination Input Required "),t.qZA())}function J(s,m){if(1&s&&(t.TgZ(0,"mat-form-field",26)(1,"mat-label"),t._uU(2,"Dates"),t.qZA(),t.TgZ(3,"mat-date-range-input",27),t._UZ(4,"input",28)(5,"input",29),t.qZA(),t._UZ(6,"mat-datepicker-toggle",30),t.TgZ(7,"mat-date-range-picker",null,31)(9,"mat-datepicker-actions")(10,"button",32),t._uU(11,"Cancel"),t.qZA(),t.TgZ(12,"button",33),t._uU(13,"Apply"),t.qZA()()()()),2&s){const n=t.MAs(8),r=t.oxw();t.xp6(3),t.Q6J("rangePicker",n),t.xp6(1),t.Q6J("formControl",r.startDateControl),t.xp6(1),t.Q6J("formControl",r.endDateControl),t.xp6(1),t.Q6J("for",n)}}function w(s,m){1&s&&(t.TgZ(0,"div",25),t._uU(1," Dates Input Required "),t.qZA())}function N(s,m){1&s&&(t.TgZ(0,"div",25),t._uU(1," Date Input Required "),t.qZA())}function L(s,m){if(1&s&&(t.TgZ(0,"mat-form-field",16)(1,"mat-label"),t._uU(2,"Date"),t.qZA(),t._UZ(3,"input",34)(4,"mat-datepicker-toggle",30),t.TgZ(5,"mat-datepicker",null,35)(7,"mat-datepicker-actions")(8,"button",32),t._uU(9,"Cancel"),t.qZA(),t.TgZ(10,"button",33),t._uU(11,"Apply"),t.qZA()()()(),t.YNc(12,N,2,0,"div",12)),2&s){const n=t.MAs(6),r=t.oxw();t.xp6(3),t.Q6J("matDatepicker",n)("formControl",r.startDateControl),t.xp6(1),t.Q6J("for",n),t.xp6(8),t.Q6J("ngIf",r.startDateControl.invalid&&r.startDateControl.touched)}}let Q=(()=>{class s{constructor(n,r,_,Z,O){this.airportService=n,this.matIconRegistry=r,this.domSanitizer=_,this.router=Z,this.store=O,this.tripTypes=["round-trip","one-way"],this.return=!0,this.fromControl=new u.NI("",u.kI.required),this.destControl=new u.NI("",u.kI.required),this.startDateControl=new u.NI("",u.kI.required),this.endDateControl=new u.NI("",this.return?u.kI.required:null),this.airports=[],this.isValid=!0,this.passengerIsValid=!1,this.matIconRegistry.addSvgIcon("switch",this.domSanitizer.bypassSecurityTrustResourceUrl("./assets/switch.svg"))}ngOnInit(){this.getAirports(),this.filteredFrom=this.fromControl.valueChanges.pipe((0,C.O)(""),(0,y.U)(n=>this._filter(n||""))),this.filteredDest=this.destControl.valueChanges.pipe((0,C.O)(""),(0,y.U)(n=>this._filter(n||"")))}_filter(n){const r=n.toLowerCase();return this.airports.filter(_=>_.city.toLowerCase().includes(r))}getAirports(){this.airportService.all().subscribe(n=>{this.airports=n})}changeInputFields(){const r=this.fromControl.value;this.fromControl.setValue(this.destControl.value),this.destControl.setValue(r)}changeTrip(n){n.value===this.tripTypes[0]?(this.return=!0,this.store.dispatch((0,d.wW)(!0))):n.value===this.tripTypes[1]&&(this.return=!1,this.store.dispatch((0,d.wW)(!1)))}passengerValid(n){this.passengerIsValid=n}validateForm(){let n;n=this.return?this.destControl.invalid||this.fromControl.invalid||this.endDateControl.invalid||this.startDateControl.invalid:this.destControl.invalid||this.fromControl.invalid||this.startDateControl.invalid,this.isValid=!n&&this.passengerIsValid}searchItems(){this.validateForm(),this.isValid&&(this.store.dispatch((0,d.ab)(this.fromControl.value||"AMS")),this.store.dispatch((0,d._4)(this.destControl.value||"MAD")),this.store.dispatch((0,d.WQ)(new Date(this.startDateControl.value||"2023-09-21T00:00:00.000Z").toISOString())),this.return&&this.store.dispatch((0,d.Jf)(new Date(this.endDateControl.value||"2023-10-11T00:00:00.000Z").toISOString())),this.router.navigate(["/booking"]),console.log(this.destControl.value,this.fromControl.value,new Date(this.startDateControl.value||"2023-09-21T00:00:00.000Z").toISOString(),new Date(this.endDateControl.value||"2023-10-11T00:00:00.000Z").toISOString()))}}return s.\u0275fac=function(n){return new(n||s)(t.Y36(h.G),t.Y36(f.jv),t.Y36(M.H7),t.Y36(l.F0),t.Y36(x.yh))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-main"]],decls:43,vars:15,consts:[[1,"container"],[1,"background"],[1,"inner-container"],[1,"card"],["action","",1,"form"],["value","round-trip","checked","","color","primary",3,"change"],["value","one-way","color","primary",3,"change"],[1,"destination"],["type","text","placeholder","From","aria-label","Number","matInput","",3,"formControl","matAutocomplete"],["autoActiveFirstOption",""],["autoFrom","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","danger-text",4,"ngIf"],["type","text","placeholder","Choose your destination","aria-label","Number2","matInput","",3,"formControl","matAutocomplete"],["autoDestination","matAutocomplete"],[1,"inline"],[1,"dates"],["appearance","fill",4,"ngIf","ngIfElse"],["soloDatePicker",""],[3,"validStatus"],[1,"search"],["mat-button","","color","primary",3,"click"],["mat-icon-button","",1,"switch",3,"click"],["svgIcon","switch"],[3,"value"],[1,"danger-text"],["appearance","fill"],[3,"rangePicker"],["matStartDate","","placeholder","Start date",3,"formControl"],["matEndDate","","placeholder","End date",3,"formControl"],["matIconSuffix","",3,"for"],["picker",""],["mat-button","","matDatepickerCancel",""],["mat-raised-button","","matDatepickerApply",""],["matInput","",3,"matDatepicker","formControl"],["datepicker",""]],template:function(n,r){if(1&n&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.TgZ(2,"div",2)(3,"mat-card",3)(4,"form",4)(5,"div")(6,"mat-radio-group")(7,"mat-radio-button",5),t.NdJ("change",function(Z){return r.changeTrip(Z)}),t._uU(8,"Round Trip"),t.qZA(),t.TgZ(9,"mat-radio-button",6),t.NdJ("change",function(Z){return r.changeTrip(Z)}),t._uU(10,"One way"),t.qZA()()(),t.TgZ(11,"div")(12,"mat-form-field",7)(13,"mat-label"),t._uU(14,"From"),t.qZA(),t._UZ(15,"input",8),t.TgZ(16,"mat-autocomplete",9,10),t.YNc(18,F,2,2,"mat-option",11),t.ALo(19,"async"),t.qZA()(),t.YNc(20,S,2,0,"div",12),t.qZA(),t.TgZ(21,"div")(22,"mat-form-field",7)(23,"mat-label"),t._uU(24,"Destination"),t.qZA(),t._UZ(25,"input",13),t.TgZ(26,"mat-autocomplete",9,14),t.YNc(28,U,2,2,"mat-option",11),t.ALo(29,"async"),t.qZA()(),t.YNc(30,k,2,0,"div",12),t.qZA(),t.TgZ(31,"div",15)(32,"div",16),t.YNc(33,J,14,4,"mat-form-field",17),t.YNc(34,w,2,0,"div",12),t.qZA(),t.YNc(35,L,13,4,"ng-template",null,18,t.W1O),t.TgZ(37,"app-passenger-list",19),t.NdJ("validStatus",function(Z){return r.passengerValid(Z)}),t.qZA()(),t.TgZ(38,"div",20)(39,"button",21),t.NdJ("click",function(){return r.searchItems()}),t._uU(40,"Search"),t.qZA()(),t.TgZ(41,"button",22),t.NdJ("click",function(){return r.changeInputFields()}),t._UZ(42,"mat-icon",23),t.qZA()()()()()),2&n){const _=t.MAs(17),Z=t.MAs(27),O=t.MAs(36);t.xp6(15),t.Q6J("formControl",r.fromControl)("matAutocomplete",_),t.xp6(3),t.Q6J("ngForOf",t.lcZ(19,11,r.filteredFrom)),t.xp6(2),t.Q6J("ngIf",r.fromControl.invalid&&r.fromControl.touched),t.xp6(5),t.Q6J("formControl",r.destControl)("matAutocomplete",Z),t.xp6(3),t.Q6J("ngForOf",t.lcZ(29,13,r.filteredDest)),t.xp6(2),t.Q6J("ngIf",r.destControl.invalid&&r.destControl.touched),t.xp6(3),t.Q6J("ngIf",r.return)("ngIfElse",O),t.xp6(1),t.Q6J("ngIf",r.return&&r.startDateControl.invalid&&r.endDateControl.invalid&&(r.endDateControl.touched||r.startDateControl.touched))}},dependencies:[c.sg,c.O5,g.lW,g.RK,f.Hw,a.a8,p.KE,p.hX,p.R9,T.Nt,P.VQ,P.U0,i.XC,I.ey,i.ZL,v.Mq,v.hl,v.nW,v.wx,v.zY,v.By,v._g,v.M5,v.dp,v.DK,u._Y,u.Fj,u.JJ,u.JL,u.F,u.oH,D.G,c.Ov],styles:[".card[_ngcontent-%COMP%]{margin-top:150px;margin-bottom:160px;width:580px;background-color:#ffffffd9}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;position:relative}.background[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background-image:url(Background.a689a0143524e8be.jpg);background-repeat:no-repeat;background-position:center top}.inner-container[_ngcontent-%COMP%]{max-width:1440px}.form[_ngcontent-%COMP%]{margin:24px;position:relative}.destination[_ngcontent-%COMP%]{width:532px}.switch[_ngcontent-%COMP%]{position:absolute;right:20px;top:80px;background-color:#fff;border:.5px solid grey}.inline[_ngcontent-%COMP%]{display:flex}.dates[_ngcontent-%COMP%]{width:50%}.danger-text[_ngcontent-%COMP%]{color:red}.search[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),s})(),$=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[e.m,l.Bz.forChild([{path:"",component:Q}])]}),s})()},6032:(b,A,o)=>{o.d(A,{Jb:()=>d,On:()=>c,aU:()=>T,bh:()=>f,f5:()=>h,fX:()=>u,i2:()=>M,iv:()=>l,mJ:()=>g,mP:()=>t,nA:()=>y,qE:()=>p,sA:()=>x,wr:()=>C,xh:()=>a});var e=o(1831);const l=i=>i.booking,u=(0,e.P1)(l,i=>i.from),C=(0,e.P1)(l,i=>i.destination),y=(0,e.P1)(l,i=>i.dateFrom),d=(0,e.P1)(l,i=>i.dateTo),t=(0,e.P1)(l,i=>i.adults),h=(0,e.P1)(l,i=>i.childs),f=(0,e.P1)(l,i=>i.infants),M=(0,e.P1)(l,i=>i.isRoundTrip),x=(0,e.P1)(l,i=>i.travelFrom),c=(0,e.P1)(l,i=>i.travelTo),g=(0,e.P1)(l,i=>i.ticketFrom),a=(0,e.P1)(l,i=>i.ticketTo),p=(0,e.P1)(l,i=>i.isLoadingFlight),T=(0,e.P1)(l,i=>i.personsData);(0,e.P1)(l,i=>i.personsContacts)},325:(b,A,o)=>{o.d(A,{G:()=>x});var e=o(4650),l=o(6032),u=o(1831),C=o(6895);let y=(()=>{class c{constructor(){this.counter=0}increase(){this.counter++}decrease(){this.counter--}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac}),c})();var d=o(9363);let t=(()=>{class c{constructor(a,p){this.counter=a,this.state=p,this.typesPassengers=["Adults","Child","Infant"]}getCounter(){return this.counter.counter}setChanges(){this.passenger.title===this.typesPassengers[0]?this.state.dispatch((0,d.rj)(this.getCounter())):this.passenger.title===this.typesPassengers[1]?this.state.dispatch((0,d.MW)(this.getCounter())):this.passenger.title===this.typesPassengers[2]&&this.state.dispatch((0,d.sk)(this.getCounter()))}increase(a){a.stopPropagation(),this.counter.increase(),this.setChanges()}decrease(a){a.stopPropagation(),this.counter.decrease(),this.setChanges()}disabled(){return!(this.getCounter()>0)}}return c.\u0275fac=function(a){return new(a||c)(e.Y36(y),e.Y36(u.yh))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-passenger-type"]],inputs:{passenger:"passenger"},features:[e._Bn([y])],decls:12,vars:4,consts:[[1,"item"],[1,"data"],[1,"counter"],["type","button",3,"disabled","click"],["type","button",3,"click"]],template:function(a,p){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA()(),e.TgZ(6,"div",2)(7,"button",3),e.NdJ("click",function(P){return p.decrease(P)}),e._uU(8,"-"),e.qZA(),e._uU(9),e.TgZ(10,"button",4),e.NdJ("click",function(P){return p.increase(P)}),e._uU(11,"+"),e.qZA()()()),2&a&&(e.xp6(3),e.Oqu(p.passenger.title),e.xp6(2),e.Oqu(p.passenger.age),e.xp6(2),e.Q6J("disabled",p.disabled()),e.xp6(2),e.hij(" ",p.getCounter()," "))},styles:[".item[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:0;width:201px;height:56px}.data[_ngcontent-%COMP%]{width:81px;height:40px}h3[_ngcontent-%COMP%]{font-family:Roboto;font-style:normal;font-weight:400;font-size:16px;line-height:24px;display:flex;align-items:center;letter-spacing:.5px;color:#11397e;margin:0}p[_ngcontent-%COMP%]{font-family:Roboto;font-style:normal;font-weight:400;font-size:14px;line-height:20px;letter-spacing:.25px;color:#74767a}button[_ngcontent-%COMP%]{width:24px;height:24px;border:none;cursor:pointer}.counter[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:flex-start;padding:0;width:72px;height:24px}"]}),c})();const h=["buttonList"];function f(c,g){1&c&&e._UZ(0,"app-passenger-type",6),2&c&&e.Q6J("passenger",g.$implicit)}function M(c,g){1&c&&(e.TgZ(0,"div",7),e._uU(1,"Passengers must be more then 0"),e.qZA())}let x=(()=>{class c{constructor(a){this.state=a,this.passengerList=[{title:"Adults",age:"14+ years"},{title:"Child",age:"2-14 years"},{title:"Infant",age:"0-2 years"}],this.isOpen=!1,this.isTouched=!1,this.text="adult 0, child 0, infant 0",this.isValid=!1,this.validStatus=new e.vpe,this.Adults$=this.state.select(l.mP),this.Childs$=this.state.select(l.f5),this.Infants$=this.state.select(l.bh),this.Adults$.subscribe(p=>{this.Adults=p,this.select()}),this.Childs$.subscribe(p=>{this.Childs=p,this.select()}),this.Infants$.subscribe(p=>{this.Infants=p,this.select()})}select(){this.Adults$=this.state.select(l.mP),this.Childs$=this.state.select(l.f5),this.Infants$=this.state.select(l.bh),this.getPasString(),this.setIsValid()}ngOnInit(){}getPasString(){this.text=`${this.Adults} Adult, ${this.Childs} Child, ${this.Infants} Infant`}openList(a){this.isOpen=!this.isOpen,this.isTouched&&this.setIsValid(),this.isTouched=!0}setIsValid(){this.isValid=!(0===this.Adults+this.Childs+this.Infants&&this.isTouched),this.emitValidStatus()}emitValidStatus(){this.validStatus.emit(this.isValid)}}return c.\u0275fac=function(a){return new(a||c)(e.Y36(u.yh))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-passenger-list"]],viewQuery:function(a,p){if(1&a&&e.Gf(h,5),2&a){let T;e.iGM(T=e.CRH())&&(p.buttonList=T.first)}},outputs:{validStatus:"validStatus"},decls:7,vars:5,consts:[[1,"relative",3,"click"],["buttonList",""],["mat-button","",1,"relative__button"],[1,"list"],[3,"passenger",4,"ngFor","ngForOf"],["class","relative__error danger-text",4,"ngIf"],[3,"passenger"],[1,"relative__error","danger-text"]],template:function(a,p){1&a&&(e.TgZ(0,"div",0,1),e.NdJ("click",function(P){return p.openList(P)}),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,f,1,1,"app-passenger-type",4),e.qZA(),e.YNc(6,M,2,0,"div",5),e.qZA()),2&a&&(e.Tol(p.isOpen?"active":""),e.xp6(3),e.Oqu(p.text),e.xp6(2),e.Q6J("ngForOf",p.passengerList),e.xp6(1),e.Q6J("ngIf",!p.isValid))},dependencies:[C.sg,C.O5,t],styles:["[_nghost-%COMP%]{width:100%;margin-left:15px}.relative[_ngcontent-%COMP%]{position:relative;padding-top:17px;padding-bottom:8px;border-radius:10px;cursor:pointer}.relative[_ngcontent-%COMP%]:hover{background-color:#eee}.relative__button[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid rgb(119,119,119);border-radius:0;margin-top:19px;text-align:center}.relative__button[_ngcontent-%COMP%]:hover{border-bottom:1px solid black}.relative__error[_ngcontent-%COMP%]{margin-top:20px}.relative.active[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{display:block}.relative.invalid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:0}.relative.invalid[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{top:55px}.list[_ngcontent-%COMP%]{display:none;position:absolute;left:0;top:60px;z-index:5;width:201px;height:184px;background:#ffffff;box-shadow:0 1px 4px #0003}.danger-text[_ngcontent-%COMP%]{color:red}"]}),c})()},372:(b,A,o)=>{o.d(A,{G:()=>y});var e=o(529),l=o(4650);const u="https://api.air-ways.online",C={headers:new e.WM({"Content-Type":"application/json"})};let y=(()=>{class d{constructor(h){this.http=h}all(){return this.http.get(`${u}/search/airport`)}searchFlight(h){return this.http.post(`${u}/search/flight`,JSON.stringify(h),C)}authMe(){return this.http.get(`${u}/auth/me`)}login(h,f){return this.http.post(`${u}/auth/login`,JSON.stringify({email:h,password:f}),C)}registration(h){return this.http.post(`${u}/auth/registration`,JSON.stringify(h),C)}}return d.\u0275fac=function(h){return new(h||d)(l.LFG(e.eN))},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);