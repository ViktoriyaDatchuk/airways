"use strict";(self.webpackChunkairways=self.webpackChunkairways||[]).push([[592],{1084:(k,d,s)=>{s.d(d,{iY:()=>a,j:()=>m});var p=s(1831);const u=t=>t.settings,a=(0,p.P1)(u,t=>t.date),m=(0,p.P1)(u,t=>t.currency)},5619:(k,d,s)=>{s.d(d,{K:()=>J});var p=s(1084),u=s(9305),a=s(3946);const m=n=>n.user;var t=s(4650),Z=s(8104),f=s(1831),g=s(6895),A=s(8252),C=s(6709),y=s(6308),I=s(4850);let v=(()=>{class n{constructor(){this.deleteItem=new t.vpe}deleteTrip(e){const o=e.currentTarget.closest(".dots-row")?.parentElement?.getElementsByClassName("number-row")[0].innerHTML;this.deleteItem.emit(o)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-menu"]],outputs:{deleteItem:"deleteItem"},decls:6,vars:0,consts:[[1,"edit-menu"],[1,"edit-menu__button",3,"click"],[1,"edit-menu__button"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(i){return o.deleteTrip(i)}),t._uU(2,"Delete"),t.qZA(),t._UZ(3,"mat-divider"),t.TgZ(4,"button",2),t._uU(5,"Edit"),t.qZA()())},dependencies:[I.d],encapsulation:2}),n})();function D(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"mat-checkbox",11),t.NdJ("change",function(r){t.CHM(e);const i=t.oxw();return t.KtG(i.setAll(r.checked))}),t._uU(1," All "),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("checked",e.allComplete)}}function B(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"mat-checkbox",25),t.NdJ("change",function(r){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.changeValue(i,r))}),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.Q6J("checked",e.selected)}}function E(n,c){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.lnq(" ",e.form.city," - ",e.to.city," - ",e.form.city," ")}}function w(n,c){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.AsE(" ",e.form.city," - ",e.to.city," ")}}function U(n,c){if(1&n&&(t.TgZ(0,"td",12),t._uU(1),t.ALo(2,"date"),t.ALo(3,"date"),t.ALo(4,"date"),t._UZ(5,"br"),t._uU(6),t.ALo(7,"date"),t.ALo(8,"date"),t.ALo(9,"date"),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.lnq(" ",t.xi3(2,6,e.takeoffDate,o.dateFormat)," ",t.xi3(3,9,e.takeoffDate,"hh:mm")," - ",t.xi3(4,12,e.landingDate,"hh:mm")," "),t.xp6(5),t.lnq("",t.xi3(7,15,e.takeoffDateBack,o.dateFormat)," ",t.xi3(8,18,e.takeoffDateBack,"hh:mm")," - ",t.xi3(9,21,e.landingDateBack,"hh:mm")," ")}}function N(n,c){if(1&n&&(t.TgZ(0,"td",12),t._uU(1),t.ALo(2,"date"),t.ALo(3,"date"),t.ALo(4,"date"),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.lnq(" ",t.xi3(2,3,e.takeoffDate,o.dateFormat)," ",t.xi3(3,6,e.takeoffDate,"hh:mm")," - ",t.xi3(4,9,e.landingDate,"hh:mm")," ")}}function $(n,c){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.adults," x Adult")}}function F(n,c){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.childs," x Child")}}function S(n,c){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.infants," x Infant")}}function Y(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(r){t.CHM(e);const i=t.oxw(2);return t.KtG(i.toggle(r))}),t._UZ(1,"img",28),t.TgZ(2,"app-edit-menu",29),t.NdJ("deleteItem",function(r){t.CHM(e);const i=t.oxw(2);return t.KtG(i.deleteItem(r))}),t.qZA()()}}function q(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",12)(2,"section",13),t.YNc(3,B,1,1,"mat-checkbox",14),t.qZA()(),t.TgZ(4,"td",15),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.linkToSummary())}),t._uU(5),t.qZA(),t.YNc(6,E,2,3,"td",16),t.YNc(7,w,2,2,"ng-template",null,17,t.W1O),t.TgZ(9,"td",12),t._uU(10),t.qZA(),t.YNc(11,U,10,24,"td",18),t.YNc(12,N,5,12,"ng-template",null,19,t.W1O),t.TgZ(14,"td",12)(15,"ul",20),t.YNc(16,$,2,1,"li",21),t.YNc(17,F,2,1,"li",21),t.YNc(18,S,2,1,"li",21),t.qZA()(),t.TgZ(19,"td",22),t._uU(20),t.qZA(),t.TgZ(21,"td",23),t.YNc(22,Y,3,0,"button",24),t.qZA()()}if(2&n){const e=c.$implicit,o=t.MAs(8),r=t.MAs(13),i=t.oxw();t.xp6(3),t.Q6J("ngIf","cart"===i.page),t.xp6(1),t.Udp("cursor","cart"===i.page?"default":"pointer"),t.xp6(1),t.hij(" ",e.flightNumber," "),t.xp6(1),t.Q6J("ngIf","Round Trip"===e.type)("ngIfElse",o),t.xp6(4),t.Oqu(e.type),t.xp6(1),t.Q6J("ngIf","Round Trip"===e.type)("ngIfElse",r),t.xp6(5),t.Q6J("ngIf",0!==e.adults),t.xp6(1),t.Q6J("ngIf",0!==e.childs),t.xp6(1),t.Q6J("ngIf",0!==e.infants),t.xp6(2),t.AsE(" ",i.currencyIcon,"",i.getPrice(e)," "),t.xp6(2),t.Q6J("ngIf","cart"===i.page)}}let J=(()=>{class n{constructor(e,o,r,i,l,h){this.dataService=e,this.store=o,this.cartStore=r,this.location=i,this.userStore=l,this.router=h,this.isVisible=!1,this.allComplete=!1,this.selected=0}ngOnInit(){this.page=this.location.path().slice(1),this.store.select(p.j).subscribe(e=>{this.currency=e,this.currencyIcon=this.dataService.currencyIcons[e]}),this.store.select(p.iY).subscribe(e=>{this.dateFormat=e}),"cart"===this.page?this.cartStore.select(u.i).subscribe(e=>{this.trips=e.flight}):this.userStore.select(m).subscribe(e=>{this.trips=e.paidFlight})}ngDoCheck(){this.sortedTrips=[...this.trips],this.selected=this.countSelected(),this.sum=this.sortedTrips.reduce((e,o)=>e+o.price[this.currency],0)}setAll(e){!1===this.allComplete?(this.allComplete=!0,this.sortedTrips.forEach(o=>this.cartStore.dispatch((0,a.i9)({selected:!0,trip:o})))):(this.allComplete=!1,this.sortedTrips.forEach(o=>this.cartStore.dispatch((0,a.i9)({selected:!1,trip:o})))),this.selected=this.countSelected()}changeValue(e,o){this.cartStore.dispatch((0,a.i9)({selected:o.checked,trip:e})),setTimeout(()=>{this.updateAllInputs()})}updateAllInputs(){this.allComplete=this.sortedTrips.every(e=>e.selected)}countSelected(){let e=0;return this.sortedTrips.forEach(o=>{!0===o.selected&&e++}),e}toggle(e){e.currentTarget?.getElementsByTagName("app-edit-menu")[0].classList.toggle("unhidden")}deleteItem(e){Array.from(document.getElementsByTagName("app-edit-menu")).forEach(o=>{o.classList.remove("unhidden")}),this.cartStore.dispatch((0,a.PS)({number:e}))}getPrice(e){return Number("eur"===this.currency?e.price.eur.toFixed(2):"usd"===this.currency?e.price.usd.toFixed(2):"rub"===this.currency?e.price.rub.toFixed(2):e.price.pln.toFixed(2))}linkToSummary(){"cart"!==this.page&&this.router.navigate(["/booking/summary"])}sortData(e){const o=[...this.trips];this.sortedTrips=e.active&&""!==e.direction?o.sort((r,i)=>{const l="asc"===e.direction;switch(e.active){case"number":return _(r.flightNumber,i.flightNumber,l);case"flight":let h,T;return h="Round Trip"===r.type?`${r.form.city} - ${r.to.city} - ${r.form.city}`:`${r.form.city} - ${r.to.city}`,T="Round Trip"===i.type?`${i.form.city} - ${i.to.city} - ${i.form.city}`:`${i.form.city} - ${i.to.city}`,_(h,T,l);case"type":return _(r.type,i.type,l);case"data":let x,b;return x=`${r.takeoffDate} - ${r.landingDate}`,b=`${i.takeoffDate} - ${i.landingDate}`,_(x,b,l);case"price":return _(r.price[this.currency],i.price[this.currency],l);default:return 0}}):o}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.D),t.Y36(f.yh),t.Y36(f.yh),t.Y36(g.Ye),t.Y36(f.yh),t.Y36(A.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-booking-table"]],decls:20,vars:2,consts:[["matSort","","matSortStart","desc",1,"trip-table",3,"matSortChange"],[1,"trip-table__header"],[1,"checkbox-col"],["class","example-margin",3,"checked","change",4,"ngIf"],["mat-sort-header","number"],["mat-sort-header","flight"],["mat-sort-header","type"],["mat-sort-header","data"],[1,"passengers-title"],["mat-sort-header","price"],[4,"ngFor","ngForOf"],[1,"example-margin",3,"checked","change"],[1,"trip-table__row"],[1,"checkbox-section"],[3,"checked","change",4,"ngIf"],[1,"trip-table__row","number-row",3,"click"],["class","trip-table__row destination-row",4,"ngIf","ngIfElse"],["secondBlock",""],["class","trip-table__row",4,"ngIf","ngIfElse"],["anotherBlock",""],[1,"passengers-list"],[4,"ngIf"],[1,"trip-table__row","trip-price"],[1,"trip-table__row","dots-row"],["class","dots-button",3,"click",4,"ngIf"],[3,"checked","change"],[1,"trip-table__row","destination-row"],[1,"dots-button",3,"click"],["src","./assets/dots.svg","alt","dots"],[1,"menu-position",3,"deleteItem"]],template:function(e,o){1&e&&(t.TgZ(0,"table",0),t.NdJ("matSortChange",function(i){return o.sortData(i)}),t.TgZ(1,"thead",1)(2,"tr")(3,"th",2),t.YNc(4,D,2,1,"mat-checkbox",3),t.qZA(),t.TgZ(5,"th",4),t._uU(6,"No."),t.qZA(),t.TgZ(7,"th",5),t._uU(8,"Flight"),t.qZA(),t.TgZ(9,"th",6),t._uU(10,"Type trip"),t.qZA(),t.TgZ(11,"th",7),t._uU(12,"Data & Time"),t.qZA(),t.TgZ(13,"th",8),t._uU(14,"Passengers"),t.qZA(),t.TgZ(15,"th",9),t._uU(16,"Price"),t.qZA(),t._UZ(17,"th"),t.qZA()(),t.TgZ(18,"tbody"),t.YNc(19,q,23,15,"tr",10),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("ngIf","cart"===o.page),t.xp6(15),t.Q6J("ngForOf",o.sortedTrips))},dependencies:[g.sg,g.O5,C.oG,y.YE,y.nU,v,g.uU],encapsulation:2}),n})();function _(n,c,e){return(n<c?-1:1)*(e?1:-1)}},8104:(k,d,s)=>{s.d(d,{D:()=>u});var p=s(4650);let u=(()=>{class a{constructor(){this.currencyIcons={eur:"\u20ac",usd:"$",rub:"\u20bd",pln:"z\u0142"}}getCurrencyIcons(){return this.currencyIcons}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=p.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);